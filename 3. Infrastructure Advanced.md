Scalability:
	1. Scalability means application can handle greater loads by adapting.
		a. Horizontal Scalability(Elasticity) - increasing instances
		b. Vertical Scalability - increasing instance size
	2. Scalability is linked but different to High availability.
	
High Availability:
	1. High availability usually goes hand in hand with horizontal scaling.
	2. It means running application in more than 2 data centers.
	3. Goal is to survive data center loss.
	4. Auto Scaling and Load balancing services are used for high availability.

Load Balancing:
	1. Load balances are servers that forward traffic to multiple servers (Eg. EC2) Down streams.
	2. Expose single point of access (DNS) to your application.
	3. Handles failures of instances
	4. Do regular health checks to your instances.
	5. Provide SSL termination(HTTPS) for your websites.
	6. Enforce stickiness with cookies.
	7. High availability across zones.
	8. Separate public traffic from private traffic.
	
Elastic Load Balancer:
	1. AWS managed load balancer.
	2. AWS guarantees its working, upgrades, maintenance and high availability.
	3. Provides few configuration knobs.
	4. Integrated with many AWS services like:
		a. EC2, Auto Scaling group, ECS, ACM, Cloud watch, Route53, AWS WAF and AWS Global accelerator.
	5. Health checks:
		a. Crucial for load balancing. Periodically checks using port and a route before sending traffic to instance
		b. Unhealthy instances are terminated and replaced with new instances 
	6. Types of Load Balancers:
		a. Classic load balancers (2009):
			i. HTTP, HTTPS, TCP, SSL(Secure TCP).
		b. Application load balancers:
			i. HTTP, HTTPS, Web socket.
		c. Network load balancers:
			i. TCP, TLS, UDP
		d. Gateway load balancers:
			i. Operates at layer 3 - IP protocol
	7. AWS Suggests to use new generation load balancers as they provide more features.
	8. Some Load Balancers can be setup as internal or external.
	9. Best practice is allow traffic from load balancers for all the instance and allow traffic to load balancer from public.

Classic Load Balancer(V1):
	1. Supports TCP (layer 4), HTTP & HTTPS (layer 7).
	2. Health checks are TCP or http based.
	3. Fixed hostname.

Application Load balancer(V2):
	1. Application load balancer is layer 7 (http).
	2. Load balances to multiple http applications across machines or in same machine having containers.
	3. Supports web sockets and redirects http traffic to https 
	4. Routing tables to different target groups.
		a. Based on URL.
		b. Based on hostname.
		c. Based on query strings, headers.
	5. ALBs are great fit for micro services & container based application.
	6. Has port mapping feature redirect to dynamic ports in ECS
	7. In comparison we need multiple CLBs per application.
	8. Target groups
		a. EC2 Instances(auto scaling), ECS Tasks, Lambda functions and Private IP addresses.
		b. It can route to multiple target groups. 
		c. Health checks are at target group level.
	9. Fixed hostname.
	10. Application servers don’t see IP of the client directly.
		a. X-Forwarded-For for true IP
		b. X-Forwarded-port for port.
		c. X-Forwarded-proto for protocol.

Network load balancers(V2):
	1. Forward TCP and UDP traffic to your instances.
	2. Handles millions of requests per second.
	3. Latency is 100ms less than ALB(400ms)
	4. NLB has one static IP per AZ and supports assigning Elastic IP.
	5. Used for extreme performance applications
	6. Target groups
		a. EC2 instances.
		b. Private IP addresses.
		c. Application load balancer
		d. Health check supports TCP, HTTP and HTTPS.

Gateway load balancer:
	1. Deploy, scale and manage a fleet of 3rd party network virtual appliances.
	2. Eg. Firewalls, Intrusion detection and prevention systems, Deep packet inspection systems, payload manipulation.
	3. Operates at layer 3(network layer) - IP packets.
	4. Combines the following functions:
		a. Transparent network gateway.
		b. Load balancer 
	5. Use GENEVE protocol on port 6081
	6. Target groups:  
		a. EC2 Instances.
		b. Private IP addresses

Sticky Sessions:
	1. It is possible to implement stickiness so that the same client is always redirected to the same instance behind a load balancer.
	2. This works for CLB and ALB.
	3. Cookie used for stickiness has a expiration date you can control.
	4. Make sure user doesn't lose his session data.
	5. Enabling stickiness may bring imbalance to the load over the backed of EC2 instances.
	6. Application Based cookie: 
		a. generated by target and can include custom attributes.
		b. Cookie name must be specified individually for each target group
		c. Don’t use AWSALB, AWSALBAPP, AWSALBTG.
	7. Duration Based cookie:
		a. Cookie generated by load balancer.
		b. AWSALB for ALB, AWSELB for CLB

Cross Zoned Load Balancing:
	1. With cross zone load balancing each load balancer instance distributes evenly across all registered instances in all AZ.
	2. In ALB is enabled by default and no charges applied. In NLB and CLB it is disabled by default and for NLB you have pay. 

SSL / TLS Basics:
	1. SSL certificate allows traffic between your clients and your load balancers to be encrypted at transit 
	2. SSL refers to Secure socket layer, used to encrypt connections.
	3. TLS refers to transport layer security. Which is new version.
	4. Public SSL are issued by Root CA
	5. Certificate has expiry date and must be renewed. 
	6. Load balancer uses an X.509 certificate (SSL/TLS server certificate)
	7. You can manage certificates using ACM.
	8. You can create and upload your own certificates alternatively.
	9. HTTPS listener:
		a. You must specify a default certificate.
		b. Add optional list of certificates for different domains.
		c. Client uses SNI to specify the hostname they reach.
		d. Ability to specify a security policy to support older version of SSL
	10. SNI solves the problem of loading multiple SSL certificates into one web servers.
	11. It’s a newer protocol and requires client to specify the hostname of the target server to initiate the SSL handshake.
	12. Server will find out the correct certificate or return the default one.
	13. Only works on ALB and NLB not CLB
	14. ALB and NLB supports multiple listeners with multiple SSL certificates. Uses SNI. For CLB you need to use multiple SSL certs for multiple hostnames.
	
Connection Draining:
	1. Connection draining for CLB
	2. Deregistration delay for ALB and NLB.
	3. It stops sending new requests to unhealthy instances.
	4. You can set time between 1 to 3600 seconds. 0 for disabled.
	5. Set to low value if requests are short.
	
Auto Scaling:
	1. Auto scaling is free and helps to increase or get rid of instances quickly. 
	2. Goals of ASG
		a. Scale out (increase)
		b. Scale in (decrease)
		c. Min and Max instances are running.
		d. Replace a new instance in case of unhealthy instances.
	3. Uses Launch template (older Launch configurations are deprecated).
		a. AMI + instance type.
		b. EC2 User Data
		c. EBS volumes.
		d. Security groups
		e. SSH Key Pair
		f. IAM roles for EC2 instances.
		g. Network + subnet information.
		h. Load balancer information.
	4. Scale based on alarms or custom metrics.
	5. Scaling Policies:
		a. Target Tracking scaling
			i. I want the average ASG CPU to stay at around 40%
		b. Simple/Step scaling
			i. CPU > 70% add 2
			ii. CPU <30% remove 1
		c. Scheduled Actions:
			i. Every day at 10AM add 10 instances.
		d. Predictive scaling:
			i. Continuously forecast load 
	6. Metrics like CPU Utilization, requests Count per target, network in and any custom metric.
	7. After scaling happens there is a cooling period (default 300) where the ASG wont do any actions like scale in or scale out 
	8. Use Golden AMI to spin up Instances faster and reduce the cooling period.
